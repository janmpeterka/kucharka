{% from "macros/icons.html.j2" import icon %}
{% from "macros/turbo.html.j2" import button_to %}

<tr id="daily-recipe-{{ daily_recipe.id }}" {% if daily_recipe.is_shopping %} class="bg-color-grey opacity-50" {% endif %} class="align-middle">

    <td>
        {% if not daily_recipe.is_shopping %}
            {{ link_to(daily_recipe.recipe) }}
        {% else %}
            {{ daily_recipe.recipe.name }}
        {% endif %}

        {% if daily_recipe.is_shopping %}
            {{ icon("shopping") }}
        {% elif  daily_recipe.recipe.is_shared %}
    	    {{ icon("public") }}
        {% endif %}
	</td>

    <td>
        {% if not daily_recipe.is_shopping %}
        <em> {{ daily_recipe.meal_type or "" }} </em>
        {% endif %}
    </td>

    <td>
        {% if not daily_recipe.is_shopping %}
            <em> {{ daily_recipe.portion_count }} porcí </em>
        {% endif %}
    </td>

    <td >
        {% if daily_plan.can_current_user_edit %}
        {{ button_to(action=url_for('DailyPlansEditView:sort_up', daily_recipe_id=daily_recipe.id), class="icon float-start", value='<i class="fas fa-sort-up"></i>') }}
        {{ button_to(action=url_for('DailyPlansEditView:sort_down', daily_recipe_id=daily_recipe.id), class="icon float-end", value='<i class="fas fa-sort-down"></i>') }}
        {% endif %}
    </td>

    <td class="ps-5">
        {% if daily_plan.can_current_user_edit and not editing %}
        <form method="POST" class="text-end me-3" action="{{ url_for('DailyPlansEditView:show_edit_daily_recipe', daily_recipe_id=daily_recipe.id) }}">
            <button type="submit" class="btn btn-warning"> Upravit </button>
        </form>
        {% endif %}

        {% if daily_plan.can_current_user_edit and editing %}
        <form method="POST" class="text-end me-3" action="{{ url_for('DailyPlansEditView:hide_edit_daily_recipe', daily_recipe_id=daily_recipe.id) }}">
            <button type="submit" class="btn btn-warning"> Zrušit úpravy </button>
        </form>
        {% endif %}
    </td>

</tr>
