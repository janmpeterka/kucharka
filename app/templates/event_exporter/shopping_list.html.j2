{% extends "base/base.html.j2" %}
{% block title %} Nákupní seznam {% endblock %}

{% block content %}

<h1 class="text-uppercase font-comfortaa text-center mb-3" >{{ link_or_name(event) }}</h1>

{% if show_type == "list" %}
    <span data-controller="toggle-details" data-turbo="false" data-toggle-details-target="buttons" class="float-end"></span>
{% endif %}
<h2 class="text-uppercase font-comfortaa">Suroviny (pro {{ event.people_count }} lidí)</h2>

<h3>Trvanlivé</h3>
{% with groups=lasting_ingredients_shopping.grouped_shopping_list, ingredients=lasting_ingredients, amounts=lasting_ingredients_shopping.recipe_ingredient_amounts %}
    {% if show_type == "list" %}
        {% include 'event_exporter/_ingredient_list.html.j2' %}
    {% else %}
        {% include 'event_exporter/_ingredient_table.html.j2' %}
    {% endif %}
{% endwith %}

{% for shopping in shoppings %}
    {% if shopping.is_shopping %}
        <h3>{{ human_format_date(shopping.date) }}</h3>
    {% else %}
        <h3>Před {{ human_format_date(shopping.date) }}</h3>
    {% endif %}

    {% with groups=shopping.grouped_shopping_list, ingredients=shopping.shopping_list, amounts=shopping.recipe_ingredient_amounts %}
    {% if show_type == "list" %}
        {% include 'event_exporter/_ingredient_list.html.j2' %}
    {% else %}
        {% include 'event_exporter/_ingredient_table.html.j2' %}
    {% endif %}
    {% endwith %}
{% endfor %}

{% endblock %}


{% block scripts_after %}
    {{ stimulus("toggle-details") }}
{% endblock %}