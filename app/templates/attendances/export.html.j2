{% extends "base/base.html.j2" %}
{% block title %} strávníci {% endblock %}

{% block content %}
  <h1> strávníci na {{ link_to(event) }}</h1>


  <div>{{ event.people_without_attendee_count}} strávníků se základní porcí</div>

  # set portion_types = current_user.portion_types + [PortionType.default]

  {% for portion_type in portion_types if (portion_type.is_default and event.people_without_attendee_count > 0) or (event.event_portion_type(portion_type) and event.event_portion_type(portion_type).count > 0) %}
    {% set event_portion_type = event.event_portion_type(portion_type) %}
    
    <div>
    <h3> {{ portion_type.name }} ({{ (portion_type.size * 100) | int }}%) -
        {{ event_portion_type.count }} {{ inflect("člověk", event_portion_type.count  )}}
    </h3>
    </div>

    {% for attendee in event.attendees_with_portion_type(portion_type) %}
      <div class="row">
        <div class="col-3">
          <strong> {{ attendee.name }} </strong>
        </div>

        <div class="col-3">
          {{ attendee.note | default("", True) }}
        </div>

        <div class="col-5">
          {% for label in attendee.labels %}
            {{ render_label(label) }}
          {% endfor %}
        </div>

      </div>
    {% endfor %}

  {% endfor %}

{% endblock %}
